<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Battleships - Play Mint</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="icon" href="../assets/images/favicon.ico" type="image/x-icon">
    <!-- AdSense script placeholder - uncomment when ready to add AdSense -->
    <!-- <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX" crossorigin="anonymous"></script> -->
</head>
<body>
    <script>window.gameContentLoaded = true;</script>
    <!-- Fullscreen ad overlay -->
    <div id="fullscreen-ad-overlay" style="display: flex;">
        <div class="ad-content">
            <button id="close-ad-btn" style="position: absolute; top: 10px; right: 10px; background: rgba(0,0,0,0.5); color: white; border: none; border-radius: 50%; width: 30px; height: 30px; font-size: 18px; cursor: pointer; display: none;">×</button>
                        <div class="ad-placeholder-fullscreen">
                <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1308401027139954"
                     crossorigin="anonymous"></script>
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-format="autorelaxed"
                     data-ad-client="ca-pub-1308401027139954"
                     data-ad-slot="1275363699"></ins>
                <script>
                     // Only show fullscreen ad if game content exists
                     if (typeof gameContentLoaded !== 'undefined' && gameContentLoaded) {
                         (adsbygoogle = window.adsbygoogle || []).push({});
                     }
                </script>
            </div>
            <div class="loader"></div>
            <p>Loading your game...</p>
        </div>
    </div>
    
    <div class="container-full" style="filter: blur(5px); opacity: 0.5;" id="game-content">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; position: relative;">
            <a href="../index.html" class="back-button">← Back to Home</a>
            <div>
                <span id="info-icon" style="cursor: pointer; font-size: 14px; color: #7f8c8d; border: 1px solid #7f8c8d; border-radius: 50%; width: 20px; height: 20px; display: inline-flex; align-items: center; justify-content: center; margin-right: 5px;">i</span>
                <span id="escape-mode-button" class="escape-mode-text" style="color: #7f8c8d; font-style: italic; display: none; cursor: pointer;">Escape mode</span>
                <div id="info-modal" style="display: none; position: absolute; top: 30px; right: 0; background: white; border: 1px solid #ccc; padding: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); z-index: 1000; width: 300px; border-radius: 8px;">
                    <p style="margin: 0 0 10px 0; font-weight: bold;">Double-tap Space to hide the game instantly.</p>
                    <p style="margin: 0 0 10px 0; font-weight: bold;">Double-tap Space again to get back to the game.</p>
                    <p style="margin: 0; font-style: italic; color: #7f8c8d;">Stay ahead with instant privacy.</p>
                </div>
            </div>
        </div>
        
        <!-- AdSense ad - top -->
        <div class="ad-container" id="gameTopAd">
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-1308401027139954"
                 data-ad-slot="1694166093"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
                 // Only load ad if game content exists
                 if (typeof gameContentLoaded !== "undefined" && gameContentLoaded) {
                     (adsbygoogle = window.adsbygoogle || []).push({});
                 } else {
                     document.getElementById("gameTopAd").style.display = "none";
                 }
            </script>
        </div>
        
        <!-- Game page with vertical ads -->
        <div class="game-page-with-ads">
            <!-- Left vertical ad -->
            <div class="vertical-ad-container" id="leftVerticalAd">
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-client="ca-pub-1308401027139954"
                     data-ad-slot="7760880993"
                     data-ad-format="auto"
                     data-full-width-responsive="true"></ins>
                <script>
                     // Only load ad if game content exists
                     if (typeof gameContentLoaded !== "undefined" && gameContentLoaded) {
                         (adsbygoogle = window.adsbygoogle || []).push({});
                     } else {
                         document.getElementById("leftVerticalAd").style.display = "none";
                     }
                </script>
            </div>
            
            <!-- Main content -->
            <div class="main-content">
                <div class="game-page">
                    <h1 class="game-title">Battleships</h1>
                    
                    <!-- Game container - Battleships embed -->
                    <div class="game-container" id="gameContainer">
                        <div><script src="https://cdn.htmlgames.com/embed.js?game=Battleships&bgcolor=white"></script></div>
                    </div>
                    
                    <!-- Fullscreen button below the game -->
                    <button class="fullscreen-button" onclick="toggleFullscreen()">Remove Ads</button>
                </div>
            </div>
            
            <!-- Right vertical ad -->
            <div class="vertical-ad-container" id="rightVerticalAd">
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-client="ca-pub-1308401027139954"
                     data-ad-slot="7760880993"
                     data-ad-format="auto"
                     data-full-width-responsive="true"></ins>
                <script>
                     // Only load ad if game content exists
                     if (typeof gameContentLoaded !== "undefined" && gameContentLoaded) {
                         (adsbygoogle = window.adsbygoogle || []).push({});
                     } else {
                         document.getElementById("rightVerticalAd").style.display = "none";
                     }
                </script>
            </div>
        </div>
        
        <!-- AdSense ad - bottom -->
        <div class="ad-container" id="gameBottomAd">
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-1308401027139954"
                 data-ad-slot="1694166093"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
                 // Only load ad if game content exists
                 if (typeof gameContentLoaded !== "undefined" && gameContentLoaded) {
                     (adsbygoogle = window.adsbygoogle || []).push({});
                 } else {
                     document.getElementById("gameBottomAd").style.display = "none";
                 }
            </script>
        </div>
    </div>
    
    <script src="../assets/js/main.js"></script>
    <script>
        // Fullscreen API implementation
        function toggleFullscreen() {
            var elem = document.getElementById("gameContainer");
            
            if (!document.fullscreenElement) {
                if (elem.requestFullscreen) {
                    elem.requestFullscreen();
                } else if (elem.webkitRequestFullscreen) { /* Safari */
                    elem.webkitRequestFullscreen();
                } else if (elem.msRequestFullscreen) { /* IE11 */
                    elem.msRequestFullscreen();
                }
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) { /* Safari */
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) { /* IE11 */
                    document.msExitFullscreen();
                }
            }
        }
        
        // Handle fullscreen change events
        document.addEventListener('fullscreenchange', exitHandler);
        document.addEventListener('webkitfullscreenchange', exitHandler);
        document.addEventListener('mozfullscreenchange', exitHandler);
        document.addEventListener('MSFullscreenChange', exitHandler);
        
        function exitHandler() {
            if (!document.fullscreenElement && !document.webkitIsFullScreen && !document.mozFullScreen && !document.msFullscreenElement) {
                // Exited fullscreen
            }
        }
    </script>
    <script>
        // Show fullscreen ad with loader, show close button immediately
        document.addEventListener('DOMContentLoaded', function() {
            // Add a small delay to ensure DOM is fully loaded
            setTimeout(function() {
                const adOverlay = document.getElementById('fullscreen-ad-overlay');
                const gameContent = document.getElementById('game-content');
                const closeAdBtn = document.getElementById('close-ad-btn');
                const body = document.body;
                
                // Debug logging
                console.log('Fullscreen ad script loaded');
                console.log('adOverlay:', adOverlay);
                console.log('gameContent:', gameContent);
                console.log('closeAdBtn:', closeAdBtn);
                
                // Function to hide ad and show game content
                function hideAdAndShowGame() {
                    if (adOverlay) {
                        adOverlay.style.display = 'none';
                    }
                    if (gameContent) {
                        gameContent.style.filter = 'none';
                        gameContent.style.opacity = '1';
                    }
                    // Remove no-scroll class from body
                    if (body) {
                        body.classList.remove('no-scroll');
                    }
                }
                
                if (adOverlay && gameContent) {
                    console.log('Showing fullscreen ad');
                    // Add no-scroll class to body
                    if (body) {
                        body.classList.add('no-scroll');
                    }
                    
                    // Show close button immediately
                    if (closeAdBtn) {
                        closeAdBtn.style.display = 'block';
                    }
                    
                    // Set up close button event listener
                    if (closeAdBtn) {
                        closeAdBtn.addEventListener('click', hideAdAndShowGame);
                    }
                } else {
                    console.log('Fallback: show game content immediately if there is an issue');
                    // Fallback: show game content immediately if there's an issue
                    if (gameContent) {
                        gameContent.style.filter = 'none';
                        gameContent.style.opacity = '1';
                    }
                    // Remove no-scroll class from body
                    if (body) {
                        body.classList.remove('no-scroll');
                    }
                }
            }, 100); // 100ms delay
        });
        
        // Redirect to learning page when spacebar is double-clicked
        let lastSpacePress = 0;
        document.addEventListener('keydown', function(event) {
            // Check if spacebar was pressed
            if (event.code === 'Space') {
                event.preventDefault();
                event.stopPropagation(); // Prevent event from bubbling to other listeners
                const now = Date.now();
                // Check if this is a double-click (within 300ms)
                if (now - lastSpacePress < 300) {
                    window.location.href = '../secret-learning.html';
                }
                lastSpacePress = now;
            }
        });
        
        // Handle info icon click to show/hide modal
        document.addEventListener('DOMContentLoaded', function() {
            const infoIcon = document.getElementById('info-icon');
            const escapeModeButton = document.getElementById('escape-mode-button');
            const infoModal = document.getElementById('info-modal');
            
            if ((infoIcon || escapeModeButton) && infoModal) {
                // Function to toggle modal visibility
                function toggleModal() {
                    if (infoModal.style.display === 'none' || infoModal.style.display === '') {
                        infoModal.style.display = 'block';
                    } else {
                        infoModal.style.display = 'none';
                    }
                }
                
                // Add event listeners to both elements
                if (infoIcon) {
                    infoIcon.addEventListener('click', function(e) {
                        e.stopPropagation();
                        toggleModal();
                    });
                }
                
                if (escapeModeButton) {
                    escapeModeButton.addEventListener('click', function(e) {
                        e.stopPropagation();
                        toggleModal();
                    });
                }
                
                // Close modal when clicking elsewhere
                document.addEventListener('click', function() {
                    infoModal.style.display = 'none';
                });
                
                // Prevent modal from closing when clicking inside it
                infoModal.addEventListener('click', function(e) {
                    e.stopPropagation();
                });
            }
        });
    </script>
</body>
</html>



