<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-adsense-account" content="ca-pub-1308401027139954">
    <title>Game Template - Play Mint</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <!-- AdSense verification code -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1308401027139954"
     crossorigin="anonymous"></script>
</head>
<body>
    <script>window.gameContentLoaded = true;</script>
    <!-- Fullscreen ad overlay -->
    <div id="fullscreen-ad-overlay" style="display: flex;">
        <div class="ad-content">
            <button id="close-ad-btn" style="position: absolute; top: 10px; right: 10px; background: rgba(0,0,0,0.5); color: white; border: none; border-radius: 50%; width: 30px; height: 30px; font-size: 18px; cursor: pointer; display: none;">×</button>
            <div class="ad-placeholder-fullscreen">
                <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1308401027139954"
                     crossorigin="anonymous"></script>
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-format="autorelaxed"
                     data-ad-client="ca-pub-1308401027139954"
                     data-ad-slot="1275363699"></ins>
                <script>
                     // Only show fullscreen ad if game content exists
                     if (typeof gameContentLoaded !== 'undefined' && gameContentLoaded) {
                         (adsbygoogle = window.adsbygoogle || []).push({});
                     }
                </script>
            </div>
            <div class="loader"></div>
            <p>Loading your game...</p>
        </div>
    </div>
    <div class="container-full" id="game-content">
        <a href="../index.html" class="back-button">← Back to Home</a>
        
        <!-- AdSense ad - top -->
        <div class="ad-container" id="gameTopAd">
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-1308401027139954"
                 data-ad-slot="1694166093"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
                 // Only load ad if game content exists
                 if (typeof gameContentLoaded !== 'undefined' && gameContentLoaded) {
                     (adsbygoogle = window.adsbygoogle || []).push({});
                 } else {
                     document.getElementById('gameTopAd').style.display = 'none';
                 }
            </script>
        </div>
        
        <!-- Game page with vertical ads -->
        <div class="game-page-with-ads">
            <!-- Left vertical ad -->
            <div class="vertical-ad-container" id="leftVerticalAd">
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-client="ca-pub-1308401027139954"
                     data-ad-slot="7760880993"
                     data-ad-format="auto"
                     data-full-width-responsive="true"></ins>
                <script>
                     // Only load ad if game content exists
                     if (typeof gameContentLoaded !== 'undefined' && gameContentLoaded) {
                         (adsbygoogle = window.adsbygoogle || []).push({});
                     } else {
                         document.getElementById('leftVerticalAd').style.display = 'none';
                     }
                </script>
            </div>
            
            <!-- Main content -->
            <div class="main-content">
                <div class="game-page">
                    <h1 class="game-title">{{GAME_TITLE}}</h1>
                    
                    <!-- Game container - replace the script tag with actual game embed -->
                    <div class="game-container" id="gameContainer">
                        <!-- START: Game Embed Script - Replace this section with actual game embed -->
                        {{GAME_EMBED_SCRIPT}}
                        <!-- END: Game Embed Script -->
                    </div>
                    
                    <!-- Fullscreen button below the game -->
                    <button class="fullscreen-button" onclick="toggleFullscreen()">Play Fullscreen</button>
                </div>
            </div>
            
            <!-- Right vertical ad -->
            <div class="vertical-ad-container" id="rightVerticalAd">
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-client="ca-pub-1308401027139954"
                     data-ad-slot="7760880993"
                     data-ad-format="auto"
                     data-full-width-responsive="true"></ins>
                <script>
                     // Only load ad if game content exists
                     if (typeof gameContentLoaded !== 'undefined' && gameContentLoaded) {
                         (adsbygoogle = window.adsbygoogle || []).push({});
                     } else {
                         document.getElementById('rightVerticalAd').style.display = 'none';
                     }
                </script>
            </div>
        </div>
        
        <!-- AdSense ad - bottom -->
        <div class="ad-container" id="gameBottomAd">
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-1308401027139954"
                 data-ad-slot="1694166093"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
                 // Only load ad if game content exists
                 if (typeof gameContentLoaded !== 'undefined' && gameContentLoaded) {
                     (adsbygoogle = window.adsbygoogle || []).push({});
                 } else {
                     document.getElementById('gameBottomAd').style.display = 'none';
                 }
            </script>
        </div>
    </div>
    
    <script src="../assets/js/main.js"></script>
    <script>
        // Fullscreen API implementation
        function toggleFullscreen() {
            var elem = document.getElementById("gameContainer");
            
            if (!document.fullscreenElement) {
                if (elem.requestFullscreen) {
                    elem.requestFullscreen();
                } else if (elem.webkitRequestFullscreen) { /* Safari */
                    elem.webkitRequestFullscreen();
                } else if (elem.msRequestFullscreen) { /* IE11 */
                    elem.msRequestFullscreen();
                }
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) { /* Safari */
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) { /* IE11 */
                    document.msExitFullscreen();
                }
            }
        }
        
        // Handle fullscreen change events
        document.addEventListener('fullscreenchange', exitHandler);
        document.addEventListener('webkitfullscreenchange', exitHandler);
        document.addEventListener('mozfullscreenchange', exitHandler);
        document.addEventListener('MSFullscreenChange', exitHandler);
        
        function exitHandler() {
            if (!document.fullscreenElement && !document.webkitIsFullScreen && !document.mozFullScreen && !document.msFullscreenElement) {
                // Exited fullscreen
            }
        }
        
        // Show fullscreen ad with loader, show close button immediately
        document.addEventListener('DOMContentLoaded', function() {
            // Add a small delay to ensure DOM is fully loaded
            setTimeout(function() {
                const adOverlay = document.getElementById('fullscreen-ad-overlay');
                const gameContent = document.getElementById('game-content');
                const closeAdBtn = document.getElementById('close-ad-btn');
                const body = document.body;
                
                // Debug logging
                console.log('Fullscreen ad script loaded');
                console.log('adOverlay:', adOverlay);
                console.log('gameContent:', gameContent);
                console.log('closeAdBtn:', closeAdBtn);
                
                // Function to hide ad and show game content
                function hideAdAndShowGame() {
                    if (adOverlay) {
                        adOverlay.style.display = 'none';
                    }
                    if (gameContent) {
                        gameContent.style.filter = 'none';
                        gameContent.style.opacity = '1';
                    }
                    if (body) {
                        body.style.overflow = 'auto';
                    }
                }
                
                // Show close button after 5 seconds
                if (closeAdBtn) {
                    setTimeout(function() {
                        closeAdBtn.style.display = 'block';
                    }, 5000);
                }
                
                // Close button event listener
                if (closeAdBtn) {
                    closeAdBtn.addEventListener('click', function() {
                        hideAdAndShowGame();
                    });
                }
                
                // Auto-hide ad after 10 seconds
                setTimeout(function() {
                    hideAdAndShowGame();
                }, 10000);
                
            }, 100); // Small delay to ensure DOM is ready
        });
    </script>
</body>
</html>