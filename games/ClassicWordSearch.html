<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classic Word Search - Play Mint</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <!-- AdSense script placeholder - uncomment when ready to add AdSense -->
    <!-- <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX" crossorigin="anonymous"></script> -->
</head>
<body>
    <!-- Fullscreen ad overlay -->
    <div id="fullscreen-ad-overlay" style="display: flex;">
        <div class="ad-content">
            <button id="close-ad-btn" style="position: absolute; top: 10px; right: 10px; background: rgba(0,0,0,0.5); color: white; border: none; border-radius: 50%; width: 30px; height: 30px; font-size: 18px; cursor: pointer; display: none;">×</button>
            <h2>Advertisement</h2>
            <div class="ad-placeholder-fullscreen">
                <p>AdSense Fullscreen Ad Placeholder</p>
            </div>
            <div class="loader"></div>
            <p>Loading your game...</p>
        </div>
    </div>
    
    <div class="container-full" style="filter: blur(5px); opacity: 0.5;" id="game-content">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <a href="../index.html" class="back-button">← Back to Home</a>
            <div style="color: #7f8c8d; font-style: italic; text-align: right;">
                Double-click <strong>Space Bar</strong> to switch to learning mode
            </div>
        </div>
        
        <!-- AdSense placeholder - top ad -->
        <div class="ad-container">
            <div class="ad-placeholder">AdSense Top Ad Placeholder</div>
        </div>
        
        <!-- Game page with vertical ads -->
        <div class="game-page-with-ads">
            <!-- Left vertical ad -->
            <div class="vertical-ad-container">
                <div class="vertical-ad-placeholder">AdSense Left Vertical Ad</div>
            </div>
            
            <!-- Main content -->
            <div class="main-content">
                <div class="game-page">
                    <h1 class="game-title">Classic Word Search</h1>
                    
                    <!-- Game container - Classic Word Search embed -->
                    <div class="game-container" id="gameContainer">
                        <!-- START: Game Embed Script - Classic Word Search -->
                        <div>
                            <script src="https://cdn.htmlgames.com/embed.js?game=ClassicWordSearch&bgcolor=white"></script>
                        </div>
                        <!-- END: Game Embed Script -->
                    </div>
                    
                    <!-- Fullscreen button below the game -->
                    <button class="fullscreen-button" onclick="toggleFullscreen()">Remove  Ads</button>
                </div>
            </div>
            
            <!-- Right vertical ad -->
            <div class="vertical-ad-container">
                <div class="vertical-ad-placeholder">AdSense Right Vertical Ad</div>
            </div>
        </div>
        
        <!-- AdSense placeholder - bottom ad -->
        <div class="ad-container">
            <div class="ad-placeholder">AdSense Bottom Ad Placeholder</div>
        </div>
    </div>
    
    <script src="../assets/js/main.js"></script>
    <script>
        // Show fullscreen ad with loader, show close button immediately
        document.addEventListener('DOMContentLoaded', function() {
            // Add a small delay to ensure DOM is fully loaded
            setTimeout(function() {
                const adOverlay = document.getElementById('fullscreen-ad-overlay');
                const gameContent = document.getElementById('game-content');
                const closeAdBtn = document.getElementById('close-ad-btn');
                const body = document.body;
                
                // Debug logging
                console.log('Fullscreen ad script loaded');
                console.log('adOverlay:', adOverlay);
                console.log('gameContent:', gameContent);
                console.log('closeAdBtn:', closeAdBtn);
                
                // Function to hide ad and show game content
                function hideAdAndShowGame() {
                    if (adOverlay) {
                        adOverlay.style.display = 'none';
                    }
                    if (gameContent) {
                        gameContent.style.filter = 'none';
                        gameContent.style.opacity = '1';
                    }
                    // Remove no-scroll class from body
                    if (body) {
                        body.classList.remove('no-scroll');
                    }
                }
                
                if (adOverlay && gameContent) {
                    console.log('Showing fullscreen ad');
                    // Add no-scroll class to body
                    if (body) {
                        body.classList.add('no-scroll');
                    }
                    
                    // Show close button immediately
                    if (closeAdBtn) {
                        closeAdBtn.style.display = 'block';
                    }
                    
                    // Set up close button event listener
                    if (closeAdBtn) {
                        closeAdBtn.addEventListener('click', hideAdAndShowGame);
                    }
                } else {
                    console.log('Fallback: show game content immediately if there is an issue');
                    // Fallback: show game content immediately if there's an issue
                    if (gameContent) {
                        gameContent.style.filter = 'none';
                        gameContent.style.opacity = '1';
                    }
                    // Remove no-scroll class from body
                    if (body) {
                        body.classList.remove('no-scroll');
                    }
                }
            }, 100); // 100ms delay
        });
        
        // Redirect to learning page when spacebar is double-clicked
        let lastSpacePress = 0;
        document.addEventListener('keydown', function(event) {
            // Check if spacebar was pressed
            if (event.code === 'Space') {
                event.preventDefault();
                event.stopPropagation(); // Prevent event from bubbling to other listeners
                const now = Date.now();
                // Check if this is a double-click (within 300ms)
                if (now - lastSpacePress < 300) {
                    window.location.href = '../secret-learning.html';
                }
                lastSpacePress = now;
            }
        });
    </script>
    <script>
        // Fullscreen API implementation
        function toggleFullscreen() {
            var elem = document.getElementById("gameContainer");
            
            if (!document.fullscreenElement) {
                if (elem.requestFullscreen) {
                    elem.requestFullscreen();
                } else if (elem.webkitRequestFullscreen) { /* Safari */
                    elem.webkitRequestFullscreen();
                } else if (elem.msRequestFullscreen) { /* IE11 */
                    elem.msRequestFullscreen();
                }
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) { /* Safari */
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) { /* IE11 */
                    document.msExitFullscreen();
                }
            }
        }
        
        // Handle fullscreen change events
        document.addEventListener('fullscreenchange', exitHandler);
        document.addEventListener('webkitfullscreenchange', exitHandler);
        document.addEventListener('mozfullscreenchange', exitHandler);
        document.addEventListener('MSFullscreenChange', exitHandler);
        
        function exitHandler() {
            if (!document.fullscreenElement && !document.webkitIsFullScreen && !document.mozFullScreen && !document.msFullscreenElement) {
                // Exited fullscreen
            }
        }
    </script>
</body>
</html>